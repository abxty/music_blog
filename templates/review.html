{% extends "base.html" %}
{% block title %}{{ track.track_name }} · Review{% endblock %}

{% block content %}
<main class="review-page">
    <h1>{{ track.track_name }}</h1>
    <h2>{{ track.artist }}</h2>

    <img src="{{ url_for('static', filename=track.image_path) }}">

    <p class="meta">
        {{ track.genre }} · {{ track.year }}
    </p>

    <article class="review-text">
        {{ review_html | safe }}
    </article>

    <!-- =========================
         COMMENTS SECTION
         ========================= -->
    <section class="comments">
        <h3>Comments</h3>

        <!-- Comment Form -->
        <form method="POST" class="comment-form">
            <input type="text" name="username" placeholder="Your name" required>
            <textarea name="comment" placeholder="Write a comment..." required></textarea>
            <button type="submit">Post Comment</button>
        </form>

        <!-- Existing Comments -->
        <div class="existing-comments">
            {% for c in comments %}
            <div class="comment">
                <p><strong>{{ c.username }}</strong> <em>{{ c.timestamp }}</em></p>
                <p>{{ c.comment }}</p>
            </div>
            {% else %}
            <p>No comments yet. Be the first!</p>
            {% endfor %}
        </div>
    </section>
</main>
{% endblock %}